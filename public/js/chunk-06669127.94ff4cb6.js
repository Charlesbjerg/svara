(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-06669127"],{4196:function(e,t,r){},4640:function(e,t,r){},"8aa0":function(e,t,r){"use strict";r("4640")},c105:function(e,t,r){"use strict";r("4196")},fa76:function(e,t,r){"use strict";r.r(t);var c=r("7a23"),n=Object(c["withScopeId"])("data-v-1e6bfa2f");Object(c["pushScopeId"])("data-v-1e6bfa2f");var a={class:"projects-index"},o=Object(c["createTextVNode"])("A Graph Might go Here"),i={key:0},s={class:"filters"},l=Object(c["createTextVNode"])("Create New Project"),u={class:"grid"},d={key:1,class:"no-projects"},p=Object(c["createVNode"])("h2",{class:"no-projects__title"},"No projects have been setup!",-1),f=Object(c["createVNode"])("p",{class:"no-projects__message"},"Create your first now!",-1),j=Object(c["createTextVNode"])("Create a Project");Object(c["popScopeId"])();var b=n((function(e,t,r,b,m,h){var O=Object(c["resolveComponent"])("PageHead"),v=Object(c["resolveComponent"])("filter-bar"),k=Object(c["resolveComponent"])("router-link"),y=Object(c["resolveComponent"])("project-card");return Object(c["openBlock"])(),Object(c["createBlock"])("div",a,[Object(c["createVNode"])(O,{title:"Ongoing Projects",subtitle:h.pageSubtitle},{default:n((function(){return[o]})),_:1},8,["subtitle"]),h.hasProjects?(Object(c["openBlock"])(),Object(c["createBlock"])("div",i,[Object(c["createVNode"])("div",s,[Object(c["createVNode"])(v,{onUpdate:h.filterProjects,onReset:h.resetProjects},null,8,["onUpdate","onReset"]),Object(c["createVNode"])(k,{to:"/projects/create",class:"btn btn-default"},{default:n((function(){return[l]})),_:1})]),Object(c["createVNode"])("section",u,[(Object(c["openBlock"])(!0),Object(c["createBlock"])(c["Fragment"],null,Object(c["renderList"])(e.projects,(function(e,t){return Object(c["openBlock"])(),Object(c["createBlock"])(y,{key:t,project:e},null,8,["project"])})),128))])])):(Object(c["openBlock"])(),Object(c["createBlock"])("section",d,[p,f,Object(c["createVNode"])(k,{to:"/projects/create",class:"btn btn-default"},{default:n((function(){return[j]})),_:1})]))])})),m=(r("96cf"),r("1da1")),h=r("5530"),O=r("5502"),v=r("009a"),k=r("4a6a"),y=(r("b0c0"),{class:"filter-bar"}),N={class:"form-item"},w=Object(c["createVNode"])("label",{for:"name"},"Name",-1),g=Object(c["createTextVNode"])("Clear "),P=Object(c["createVNode"])("i",{class:"fas fa-filter ml-5"},null,-1);function V(e,t,r,n,a,o){var i=Object(c["resolveComponent"])("autocomplete");return Object(c["openBlock"])(),Object(c["createBlock"])("div",y,[Object(c["createVNode"])("div",N,[w,Object(c["withDirectives"])(Object(c["createVNode"])("input",{type:"text",id:"name","onUpdate:modelValue":t[1]||(t[1]=function(e){return a.name=e}),placeholder:"Search by Project Name",onKeyup:t[2]||(t[2]=function(){return o.filterByName&&o.filterByName.apply(o,arguments)}),autocomplete:"off"},null,544),[[c["vModelText"],a.name]])]),Object(c["createVNode"])(i,{label:"Client",url:"api/clients",filterKey:"client",searchKey:"name",onSelected:o.addFilter},null,8,["onSelected"]),Object(c["createVNode"])(i,{label:"Project Lead",url:"api/users/project-leads",filterKey:"projectLead",searchKey:"name",onSelected:o.addFilter},null,8,["onSelected"]),Object(c["createVNode"])("button",{class:"btn btn-alt filter-bar__clear",onClick:t[3]||(t[3]=function(){return o.clearFilters&&o.clearFilters.apply(o,arguments)})},[g,P])])}r("c740"),r("4160"),r("159b");var x=r("1b5b"),B={name:"FilterBar",components:{Autocomplete:x["a"]},data:function(){return{name:"",meta:null,filters:[],keyupTimeout:null}},methods:{filterByName:function(){var e=this;clearTimeout(this.keyupTimeout),this.keyupTimeout=setTimeout((function(){e.addFilter({key:"name",value:self.name})}),500)},addFilter:function(e){var t=this.filters.findIndex((function(t){return t.key===e.key}));-1!==t?this.filters[t].value=e.value:this.filters.push(e),this.filterResults()},filterResults:function(){var e=this;return Object(m["a"])(regeneratorRuntime.mark((function t(){var r,c;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return e.$store.commit("util/enableLoader"),r=[],e.filters.forEach((function(e){e.value.hasOwnProperty("id")?r[e.key]=e.value.id:r[e.key]=e.value})),t.next=5,e.$api("api/projects/filter","GET",r);case 5:c=t.sent,e.$emit("update",c.data),e.$store.commit("util/disableLoader");case 8:case"end":return t.stop()}}),t)})))()},clearFilters:function(){this.name="",this.meta=null,this.filters=[],document.querySelectorAll(".filter-bar input").forEach((function(e){return e.value=""})),this.$emit("reset")}}};r("8aa0");B.render=V;var R=B,T={name:"ProjectsIndex",components:{FilterBar:R,ProjectCard:v["a"],PageHead:k["a"]},data:function(){return{filteredResults:[],filtersApplied:!1}},computed:Object(h["a"])(Object(h["a"])({},Object(O["c"])({projects:"projects/getAllProjects"})),{},{pageSubtitle:function(){return"There are currently ".concat(this.projects.length," in the pipeline")},hasProjects:function(){return this.projects.length>0}}),mounted:function(){var e=this;return Object(m["a"])(regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,e.fetchProjects();case 2:case"end":return t.stop()}}),t)})))()},methods:{fetchProjects:function(){var e=this;return Object(m["a"])(regeneratorRuntime.mark((function t(){var r;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return e.$store.commit("util/enableLoader"),t.next=3,e.$api("api/projects","GET");case 3:r=t.sent,e.$store.commit("projects/setProjects",r.data),e.$store.commit("util/disableLoader");case 6:case"end":return t.stop()}}),t)})))()},filterProjects:function(e){this.filtersApplied=!0,this.$store.commit("projects/setProjects",e)},resetProjects:function(){var e=this;return Object(m["a"])(regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return e.filtersApplied=!1,t.next=3,e.fetchProjects();case 3:case"end":return t.stop()}}),t)})))()}}};r("c105");T.render=b,T.__scopeId="data-v-1e6bfa2f";t["default"]=T}}]);
//# sourceMappingURL=chunk-06669127.94ff4cb6.js.map