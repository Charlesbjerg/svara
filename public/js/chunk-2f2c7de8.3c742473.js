(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-2f2c7de8"],{"01b8":function(e,t,a){"use strict";a("e421")},"227d":function(e,t,a){},"3c8d":function(e,t,a){"use strict";a("227d")},"53f2":function(e,t,a){},5899:function(e,t){e.exports="\t\n\v\f\r                　\u2028\u2029\ufeff"},"58a8":function(e,t,a){var n=a("1d80"),r=a("5899"),c="["+r+"]",s=RegExp("^"+c+c+"*"),o=RegExp(c+c+"*$"),i=function(e){return function(t){var a=String(n(t));return 1&e&&(a=a.replace(s,"")),2&e&&(a=a.replace(o,"")),a}};e.exports={start:i(1),end:i(2),trim:i(3)}},7156:function(e,t,a){var n=a("861d"),r=a("d2bb");e.exports=function(e,t,a){var c,s;return r&&"function"==typeof(c=t.constructor)&&c!==a&&n(s=c.prototype)&&s!==a.prototype&&r(e,s),e}},a9e3:function(e,t,a){"use strict";var n=a("83ab"),r=a("da84"),c=a("94ca"),s=a("6eeb"),o=a("5135"),i=a("c6b6"),u=a("7156"),d=a("c04e"),l=a("d039"),m=a("7c73"),p=a("241c").f,f=a("06cf").f,b=a("9bf2").f,O=a("58a8").trim,j="Number",k=r[j],h=k.prototype,v=i(m(h))==j,N=function(e){var t,a,n,r,c,s,o,i,u=d(e,!1);if("string"==typeof u&&u.length>2)if(u=O(u),t=u.charCodeAt(0),43===t||45===t){if(a=u.charCodeAt(2),88===a||120===a)return NaN}else if(48===t){switch(u.charCodeAt(1)){case 66:case 98:n=2,r=49;break;case 79:case 111:n=8,r=55;break;default:return+u}for(c=u.slice(2),s=c.length,o=0;o<s;o++)if(i=c.charCodeAt(o),i<48||i>r)return NaN;return parseInt(c,n)}return+u};if(c(j,!k(" 0o1")||!k("0b1")||k("+0x1"))){for(var g,T=function(e){var t=arguments.length<1?0:e,a=this;return a instanceof T&&(v?l((function(){h.valueOf.call(a)})):i(a)!=j)?u(new k(N(t)),a,T):N(t)},B=n?p(k):"MAX_VALUE,MIN_VALUE,NaN,NEGATIVE_INFINITY,POSITIVE_INFINITY,EPSILON,isFinite,isInteger,isNaN,isSafeInteger,MAX_SAFE_INTEGER,MIN_SAFE_INTEGER,parseFloat,parseInt,isInteger,fromString,range".split(","),y=0;B.length>y;y++)o(k,g=B[y])&&!o(T,g)&&b(T,g,f(k,g));T.prototype=h,h.constructor=T,s(r,j,T)}},cb27:function(e,t,a){"use strict";a("53f2")},d3ec:function(e,t,a){"use strict";a.r(t);a("b0c0");var n=a("7a23"),r={class:"teams-index"},c={class:"teams-grid"},s={class:"teams-grid__teams panel"},o=Object(n["createVNode"])("h2",null,"Company Teams",-1),i={class:"teams-grid__list"},u=Object(n["createTextVNode"])(" Add Team "),d=Object(n["createVNode"])("i",{class:"fas fa-users"},null,-1),l={class:"panel"},m={key:0},p={class:"team-users-grid"},f=Object(n["createTextVNode"])(" Add User "),b=Object(n["createVNode"])("i",{class:"fas fa-user-plus"},null,-1),O={key:1,class:"teams-grid__none"},j=Object(n["createVNode"])("h2",null,"Select a team from the sidebar to view their users.",-1);function k(e,t,a,k,h,v){var N=this,g=Object(n["resolveComponent"])("page-head"),T=Object(n["resolveComponent"])("team-card"),B=Object(n["resolveComponent"])("staff-member-card"),y=Object(n["resolveComponent"])("add-user-to-team"),V=Object(n["resolveComponent"])("action-modal");return Object(n["openBlock"])(),Object(n["createBlock"])("div",r,[Object(n["createVNode"])(g,{title:"Teams"}),Object(n["createVNode"])("div",c,[Object(n["createVNode"])("aside",s,[o,Object(n["createVNode"])("ul",i,[(Object(n["openBlock"])(!0),Object(n["createBlock"])(n["Fragment"],null,Object(n["renderList"])(h.teams,(function(e){return Object(n["openBlock"])(),Object(n["createBlock"])("li",{key:e.id},[Object(n["createVNode"])(T,{team:e,onClick:function(t){return v.selectTeam(e,t)},onUpdated:v.updateTeams},null,8,["team","onClick","onUpdated"])])})),128))]),Object(n["createVNode"])("button",{class:"btn btn-default team-users-grid__add",onClick:t[1]||(t[1]=function(){return v.addBlankTeam&&v.addBlankTeam.apply(v,arguments)})},[u,d])]),Object(n["createVNode"])("section",l,[h.selected?(Object(n["openBlock"])(),Object(n["createBlock"])("div",m,[Object(n["createVNode"])("h2",null,"Users in "+Object(n["toDisplayString"])(v.selectedTeam.name),1),Object(n["createVNode"])("div",p,[(Object(n["openBlock"])(!0),Object(n["createBlock"])(n["Fragment"],null,Object(n["renderList"])(v.selectedTeam.members,(function(e,t){return Object(n["openBlock"])(),Object(n["createBlock"])(B,{key:t,user:e,deletable:!0,"main-user":!1,onDeleted:function(t){return v.removeUser(e.id,h.selected)}},null,8,["user","onDeleted"])})),128))]),Object(n["createVNode"])("button",{class:"btn btn-default team-users-grid__add",onClick:t[2]||(t[2]=function(){return v.addUser&&v.addUser.apply(v,arguments)})},[f,b])])):(Object(n["openBlock"])(),Object(n["createBlock"])("div",O,[j]))])]),h.addUserModal?(Object(n["openBlock"])(),Object(n["createBlock"])(V,{key:0,active:h.addUserModal,title:"Add User to Team"},{default:Object(n["withCtx"])((function(){return[Object(n["createVNode"])(y,{teamId:N.selected,onUpdated:v.updateTeams,onClose:v.closeModal},null,8,["teamId","onUpdated","onClose"])]})),_:1},8,["active"])):Object(n["createCommentVNode"])("",!0)])}a("99af"),a("7db0"),a("96cf");var h=a("1da1"),v=a("4a6a"),N=a("1415"),g=a("e4e1"),T=a("053a"),B={class:"team-add-user"},y=Object(n["createVNode"])("p",null,"Find a user to add to the team. They must not currently belong to a team, as users can only belong to a single team.",-1),V={class:"form-item"},U=Object(n["createVNode"])("label",{for:"user"},"Find User (By Name)",-1),C={key:0,class:"search-results"},_={class:"search-results__name"},x=Object(n["createVNode"])("i",{class:"far fa-check-circle"},null,-1);function w(e,t,a,r,c,s){var o=Object(n["resolveComponent"])("staff-member-card");return Object(n["openBlock"])(),Object(n["createBlock"])("div",B,[y,Object(n["createVNode"])("div",V,[U,Object(n["createVNode"])("input",{type:"text",name:"user",id:"user",onKeyup:t[1]||(t[1]=function(){return s.findUser&&s.findUser.apply(s,arguments)}),autocomplete:"off"},null,32),0!==c.userResults.length?(Object(n["openBlock"])(),Object(n["createBlock"])("div",C,[(Object(n["openBlock"])(!0),Object(n["createBlock"])(n["Fragment"],null,Object(n["renderList"])(c.userResults,(function(e){return Object(n["openBlock"])(),Object(n["createBlock"])("article",{class:"search-results__result",key:e.id,onClick:function(t){return s.selectUser(e)}},[Object(n["createVNode"])("span",_,Object(n["toDisplayString"])(e.name),1),x],8,["onClick"])})),128))])):Object(n["createCommentVNode"])("",!0)]),c.user?(Object(n["openBlock"])(),Object(n["createBlock"])(o,{key:0,user:c.user},null,8,["user"])):Object(n["createCommentVNode"])("",!0),Object(n["createVNode"])("button",{class:"btn btn-default",onClick:t[2]||(t[2]=function(){return s.confirmUser&&s.confirmUser.apply(s,arguments)})},"Add User to Team")])}a("a9e3");var I={name:"AddUserToTeam",components:{StaffMemberCard:g["a"]},emits:["close","updated"],props:{teamId:{required:!0,type:Number}},data:function(){return{userResults:[],user:null}},mounted:function(){},methods:{findUser:function(e){var t=this;return Object(h["a"])(regeneratorRuntime.mark((function a(){var n,r;return regeneratorRuntime.wrap((function(a){while(1)switch(a.prev=a.next){case 0:return n=e.target.value,a.next=3,t.$api("api/teams/find-user","GET",{name:n});case 3:r=a.sent,t.userResults=r.data;case 5:case"end":return a.stop()}}),a)})))()},selectUser:function(e){this.user=e,this.userResults=[]},confirmUser:function(){var e=this;return Object(h["a"])(regeneratorRuntime.mark((function t(){var a;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,e.$api("api/teams/".concat(e.teamId,"/user/").concat(e.user.id),"POST");case 2:a=t.sent,a.data.success&&(e.$emit("updated",a.data.teams),e.$emit("close"));case 4:case"end":return t.stop()}}),t)})))()}}};a("cb27");I.render=w;var A=I,R={class:"team-card"},E={class:"team-card__total"};function S(e,t,a,r,c,s){return Object(n["openBlock"])(),Object(n["createBlock"])("div",R,[c.edit?Object(n["withDirectives"])((Object(n["openBlock"])(),Object(n["createBlock"])("input",{key:0,type:"text",class:"team-card__input","onUpdate:modelValue":t[1]||(t[1]=function(e){return a.team.name=e}),onBlur:t[2]||(t[2]=function(){return s.updateTeam&&s.updateTeam.apply(s,arguments)})},null,544)),[[n["vModelText"],a.team.name]]):(Object(n["openBlock"])(),Object(n["createBlock"])("h3",{key:1,class:"team-card__name",onClick:t[3]||(t[3]=function(e){return c.edit=!0})},Object(n["toDisplayString"])(a.team.name),1)),Object(n["createVNode"])("p",E,Object(n["toDisplayString"])(a.team.members.length)+" members in team",1)])}var M={name:"TeamCard",emits:["updated"],props:{team:{required:!0,type:Object}},data:function(){return{edit:!1}},mounted:function(){var e=this;this.$nextTick((function(){null===e.team.id&&(e.edit=!0)}))},methods:{updateTeam:function(){var e=this;return Object(h["a"])(regeneratorRuntime.mark((function t(){var a;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:if(null!==e.team.id){t.next=6;break}return t.next=3,e.$api("api/teams","POST",{name:e.team.name});case 3:a=t.sent,t.next=9;break;case 6:return t.next=8,e.$api("api/teams/".concat(e.team.id),"PATCH",{name:e.team.name});case 8:a=t.sent;case 9:e.edit=!1,e.$emit("updated",a.data.teams);case 11:case"end":return t.stop()}}),t)})))()}}};a("01b8");M.render=S;var F=M,$={name:"index",components:{AddUserToTeam:A,ActionModal:T["a"],StaffMemberCard:g["a"],ProjectStaffMember:N["a"],PageHead:v["a"],TeamCard:F},data:function(){return{teams:[],selected:null,addUserModal:!1}},computed:{selectedTeam:function(){var e=this;return this.teams.find((function(t){return t.id===e.selected}))}},mounted:function(){var e=this;return Object(h["a"])(regeneratorRuntime.mark((function t(){var a;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,e.$api("api/teams");case 2:a=t.sent,e.teams=a.data;case 4:case"end":return t.stop()}}),t)})))()},methods:{selectTeam:function(e,t){this.selected=e.id},removeUser:function(e,t){var a=this;return Object(h["a"])(regeneratorRuntime.mark((function n(){var r;return regeneratorRuntime.wrap((function(n){while(1)switch(n.prev=n.next){case 0:return n.next=2,a.$api("api/teams/".concat(t,"/user/").concat(e),"DELETE");case 2:r=n.sent,r.data.success&&(a.teams=r.data.teams);case 4:case"end":return n.stop()}}),n)})))()},addBlankTeam:function(){this.teams.push({id:null,name:"New Team",members:[]})},updateTeams:function(e){this.teams=e},addUser:function(){console.log("open modal"),this.addUserModal=!0},closeModal:function(){this.addUserModal=!1}}};a("3c8d");$.render=k;t["default"]=$},e421:function(e,t,a){}}]);
//# sourceMappingURL=chunk-2f2c7de8.3c742473.js.map