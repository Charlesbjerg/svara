(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-e16d6bcc"],{"053a":function(e,t,a){"use strict";var r=a("7a23"),c={class:"action-modal-outer",ref:"modal"},n=Object(r["createVNode"])("div",{class:"action-modal-overlay"},null,-1),o={class:"action-modal"},s={class:"action-modal__head"},l={class:"action-modal__title"},i=Object(r["createVNode"])("i",{class:"fas fa-times"},null,-1);function u(e,t,a,u,d,p){return Object(r["openBlock"])(),Object(r["createBlock"])("aside",c,[n,Object(r["createVNode"])("div",o,[Object(r["createVNode"])("header",s,[Object(r["createVNode"])("h2",l,Object(r["toDisplayString"])(a.title),1),Object(r["createVNode"])("button",{class:"action-modal__close",onClick:t[1]||(t[1]=function(){return p.closeModal&&p.closeModal.apply(p,arguments)})},[i])]),a.component?(Object(r["openBlock"])(),Object(r["createBlock"])(Object(r["resolveDynamicComponent"])(a.component),{key:0})):Object(r["renderSlot"])(e.$slots,"default",{key:1})])],512)}a("b0c0");var d=Object(r["withScopeId"])("data-v-468d0536");Object(r["pushScopeId"])("data-v-468d0536");var p={class:"add-user"},m=Object(r["createVNode"])("p",null,"The new user will be sent an email to finish setting up this account. The account will automatically be attached to this company.",-1),b={class:"form-item"},f=Object(r["createVNode"])("label",{for:"name"},"Full Name",-1),j={class:"form-item"},O=Object(r["createVNode"])("label",{for:"jobRole"},"Job Role",-1),v={class:"form-item"},h=Object(r["createVNode"])("label",{for:"email"},"Email Address",-1),k={class:"form-item"},y=Object(r["createVNode"])("label",{for:"type"},"User Type",-1),V=Object(r["createVNode"])("option",{disabled:"",selected:""},"Select a type",-1),w={class:"form-item"},N=Object(r["createVNode"])("label",{for:"team"},"Team",-1),g=Object(r["createVNode"])("option",{disabled:"",selected:""},"Select a team",-1);Object(r["popScopeId"])();var B=d((function(e,t,a,c,n,o){return Object(r["openBlock"])(),Object(r["createBlock"])("div",p,[m,Object(r["createVNode"])("div",b,[f,Object(r["withDirectives"])(Object(r["createVNode"])("input",{type:"text",id:"name","onUpdate:modelValue":t[1]||(t[1]=function(e){return n.name=e}),placeholder:"Full Name",autocomplete:"off"},null,512),[[r["vModelText"],n.name]])]),Object(r["createVNode"])("div",j,[O,Object(r["withDirectives"])(Object(r["createVNode"])("input",{type:"text",id:"jobRole","onUpdate:modelValue":t[2]||(t[2]=function(e){return n.jobRole=e}),placeholder:"Graphic Designer",autocomplete:"off"},null,512),[[r["vModelText"],n.jobRole]])]),Object(r["createVNode"])("div",v,[h,Object(r["withDirectives"])(Object(r["createVNode"])("input",{type:"email",id:"email","onUpdate:modelValue":t[3]||(t[3]=function(e){return n.email=e}),placeholder:"dev@svara.io",autocomplete:"off"},null,512),[[r["vModelText"],n.email]])]),Object(r["createVNode"])("div",k,[y,Object(r["withDirectives"])(Object(r["createVNode"])("select",{id:"type","onUpdate:modelValue":t[4]||(t[4]=function(e){return n.type=e})},[V,(Object(r["openBlock"])(!0),Object(r["createBlock"])(r["Fragment"],null,Object(r["renderList"])(n.types,(function(e,t){return Object(r["openBlock"])(),Object(r["createBlock"])("option",{key:t,value:e.id},Object(r["toDisplayString"])(e.type),9,["value"])})),128))],512),[[r["vModelSelect"],n.type]])]),Object(r["createVNode"])("div",w,[N,Object(r["withDirectives"])(Object(r["createVNode"])("select",{id:"team","onUpdate:modelValue":t[5]||(t[5]=function(e){return n.team=e})},[g,(Object(r["openBlock"])(!0),Object(r["createBlock"])(r["Fragment"],null,Object(r["renderList"])(n.teams,(function(e,t){return Object(r["openBlock"])(),Object(r["createBlock"])("option",{key:t,value:e.id},Object(r["toDisplayString"])(e.name),9,["value"])})),128))],512),[[r["vModelSelect"],n.team]])]),Object(r["createVNode"])("button",{class:"btn btn-default",onClick:t[6]||(t[6]=function(){return o.submit&&o.submit.apply(o,arguments)})},"Create User")])})),R=(a("96cf"),a("1da1")),U={name:"AddUser",data:function(){return{name:"",jobRole:"",email:"",type:null,team:null,types:[],teams:[]}},mounted:function(){var e=this;return Object(R["a"])(regeneratorRuntime.mark((function t(){var a;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,e.$api("api/users/setup-data");case 2:a=t.sent,e.types=a.data.types,e.teams=a.data.teams,console.log(a.data.types);case 6:case"end":return t.stop()}}),t)})))()},methods:{submit:function(){var e=this;return Object(R["a"])(regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,e.$api("api/auth/register","POST",{name:e.name,jobRole:e.jobRole,email:e.email,type:e.type,team:e.team});case 2:t.sent,e.$emit("close");case 4:case"end":return t.stop()}}),t)})))()}}};U.render=B,U.__scopeId="data-v-468d0536";var T=U,x={class:"deact-user"},S=Object(r["createVNode"])("p",null,"Deactivates a user account. The user can be reinstated at a later date if necessary. Users cannot be fully deleted as an audit trail is required throughout Svara. ",-1),D={class:"form-item"},C=Object(r["createVNode"])("label",{for:"user"},"Find User (By Name)",-1),_={key:0,class:"search-results"},$={class:"search-results__name"},M=Object(r["createVNode"])("i",{class:"far fa-check-circle"},null,-1);function P(e,t,a,c,n,o){var s=Object(r["resolveComponent"])("staff-member-card");return Object(r["openBlock"])(),Object(r["createBlock"])("div",x,[S,Object(r["createVNode"])("div",D,[C,Object(r["createVNode"])("input",{type:"text",name:"user",id:"user",onKeyup:t[1]||(t[1]=function(){return o.findUser&&o.findUser.apply(o,arguments)}),autocomplete:"off"},null,32),0!==n.userResults.length?(Object(r["openBlock"])(),Object(r["createBlock"])("div",_,[(Object(r["openBlock"])(!0),Object(r["createBlock"])(r["Fragment"],null,Object(r["renderList"])(n.userResults,(function(e){return Object(r["openBlock"])(),Object(r["createBlock"])("article",{class:"search-results__result",key:e.id,onClick:function(t){return o.selectUser(e)}},[Object(r["createVNode"])("span",$,Object(r["toDisplayString"])(e.name),1),M],8,["onClick"])})),128))])):Object(r["createCommentVNode"])("",!0)]),n.user?(Object(r["openBlock"])(),Object(r["createBlock"])(s,{key:0,user:n.user},null,8,["user"])):Object(r["createCommentVNode"])("",!0),Object(r["createVNode"])("button",{class:"btn btn-alt",onClick:t[2]||(t[2]=function(){return o.disableUser&&o.disableUser.apply(o,arguments)})},"Disable User")])}var F=a("e4e1"),I={name:"DeactivateUser",components:{StaffMemberCard:F["a"]},data:function(){return{userResults:[],user:null}},methods:{findUser:function(e){var t=this;return Object(R["a"])(regeneratorRuntime.mark((function a(){var r,c;return regeneratorRuntime.wrap((function(a){while(1)switch(a.prev=a.next){case 0:return r=e.target.value,a.next=3,t.$api("api/users/staff","GET",{name:r});case 3:c=a.sent,t.userResults=c.data;case 5:case"end":return a.stop()}}),a)})))()},selectUser:function(e){this.user=e,this.userResults=[]},disableUser:function(){var e=this;return Object(R["a"])(regeneratorRuntime.mark((function t(){var a;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,e.$api("api/auth/deactivate/".concat(e.user.id),"DELETE");case 2:a=t.sent,a.data.success&&(console.log("succ"),e.$emit("close"));case 4:case"end":return t.stop()}}),t)})))()}}};a("ef18");I.render=P;var L=I,E={class:"deact-user"},q=Object(r["createVNode"])("p",null,"Resets a users password. They will have an email sent to them directly from Svara, allowing them to reset their password.",-1),A={class:"form-item"},K=Object(r["createVNode"])("label",{for:"user"},"Find User (By Name)",-1),G={key:0,class:"search-results"},J={class:"search-results__name"},W=Object(r["createVNode"])("i",{class:"far fa-check-circle"},null,-1);function z(e,t,a,c,n,o){var s=Object(r["resolveComponent"])("staff-member-card");return Object(r["openBlock"])(),Object(r["createBlock"])("div",E,[q,Object(r["createVNode"])("div",A,[K,Object(r["createVNode"])("input",{type:"text",name:"user",id:"user",onKeyup:t[1]||(t[1]=function(){return o.findUser&&o.findUser.apply(o,arguments)}),autocomplete:"off"},null,32),0!==n.userResults.length?(Object(r["openBlock"])(),Object(r["createBlock"])("div",G,[(Object(r["openBlock"])(!0),Object(r["createBlock"])(r["Fragment"],null,Object(r["renderList"])(n.userResults,(function(e){return Object(r["openBlock"])(),Object(r["createBlock"])("article",{class:"search-results__result",key:e.id,onClick:function(t){return o.selectUser(e)}},[Object(r["createVNode"])("span",J,Object(r["toDisplayString"])(e.name),1),W],8,["onClick"])})),128))])):Object(r["createCommentVNode"])("",!0)]),n.user?(Object(r["openBlock"])(),Object(r["createBlock"])(s,{key:0,user:n.user},null,8,["user"])):Object(r["createCommentVNode"])("",!0),Object(r["createVNode"])("button",{class:"btn btn-default",onClick:t[2]||(t[2]=function(){return o.resetPassword&&o.resetPassword.apply(o,arguments)})},"Reset User's Password")])}var H={name:"ResetPassword",components:{StaffMemberCard:F["a"]},data:function(){return{userResults:[],user:null}},methods:{findUser:function(e){var t=this;return Object(R["a"])(regeneratorRuntime.mark((function a(){var r,c;return regeneratorRuntime.wrap((function(a){while(1)switch(a.prev=a.next){case 0:return r=e.target.value,a.next=3,t.$api("api/users/staff","GET",{name:r});case 3:c=a.sent,t.userResults=c.data;case 5:case"end":return a.stop()}}),a)})))()},selectUser:function(e){this.user=e,this.userResults=[]},resetPassword:function(){var e=this;return Object(R["a"])(regeneratorRuntime.mark((function t(){var a;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,e.$api("api/auth/forgot-password/".concat(e.user.id),"POST");case 2:a=t.sent,a.status&&console.log("ok"),e.$emit("close");case 5:case"end":return t.stop()}}),t)})))()}}};a("4f44");H.render=z;var Q=H,X=Object(r["withScopeId"])("data-v-21c8393e");Object(r["pushScopeId"])("data-v-21c8393e");var Y={class:"form-item"},Z=Object(r["createVNode"])("label",{for:"name"},"Template Name",-1),ee={class:"form-item"},te=Object(r["createVNode"])("label",{for:"message"},"Message",-1);Object(r["popScopeId"])();var ae=X((function(e,t,a,c,n,o){return Object(r["openBlock"])(),Object(r["createBlock"])("div",null,[Object(r["createVNode"])("div",Y,[Z,Object(r["withDirectives"])(Object(r["createVNode"])("input",{type:"text",id:"name",placeholder:"Design Sign-off","onUpdate:modelValue":t[1]||(t[1]=function(e){return o.template.name=e}),onKeyup:t[2]||(t[2]=function(){return o.update&&o.update.apply(o,arguments)})},null,544),[[r["vModelText"],o.template.name]])]),Object(r["createVNode"])("div",ee,[te,Object(r["withDirectives"])(Object(r["createVNode"])("textarea",{id:"message",placeholder:"We require you to sign off this piece of work.",rows:"8","onUpdate:modelValue":t[3]||(t[3]=function(e){return o.template.message=e}),onKeyup:t[4]||(t[4]=function(){return o.update&&o.update.apply(o,arguments)})},null,544),[[r["vModelText"],o.template.message]])])])})),re={name:"MessageTemplate",computed:{template:function(){return this.$store.state.entities.signOff.selected}},data:function(){return{updateTimeout:null}},methods:{update:function(){var e=this;return Object(R["a"])(regeneratorRuntime.mark((function t(){var a;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return a=e,clearTimeout(e.updateTimeout),t.next=4,setTimeout(Object(R["a"])(regeneratorRuntime.mark((function t(){var r;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,e.$api("api/projects/pipeline/signoffs/templates","POST",a.template);case 2:r=t.sent,e.$store.commit("entities/updateTemplate",r.data);case 4:case"end":return t.stop()}}),t)}))),500);case 4:e.updateTimeout=t.sent;case 5:case"end":return t.stop()}}),t)})))()}}};re.render=ae,re.__scopeId="data-v-21c8393e";var ce=re,ne={name:"ActionModal",components:{AddUser:T,DeactivateUser:L,ResetPassword:Q,MessageTemplate:ce},props:{component:{type:String,required:!1,default:null},title:{type:String,required:!0}},mounted:function(){var e=this;this.$nextTick((function(){setTimeout((function(){e.$refs.modal.classList.add("active")}),250)}))},methods:{closeModal:function(){var e=this;this.$refs.modal.classList.remove("active"),setTimeout((function(){e.$emit("close")}),400)}}};a("d3ed");ne.render=u;t["a"]=ne},"05ec":function(e,t,a){},"4f44":function(e,t,a){"use strict";a("9bf0")},9157:function(e,t,a){},"9bf0":function(e,t,a){},d3ed:function(e,t,a){"use strict";a("05ec")},ef18:function(e,t,a){"use strict";a("9157")}}]);
//# sourceMappingURL=chunk-e16d6bcc.908a59ae.js.map