(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-7997b1cb"],{"018e":function(e,t,r){},"37a8":function(e,t,r){"use strict";r("018e")},b008:function(e,t,r){"use strict";r("fbe7")},fa76:function(e,t,r){"use strict";r.r(t);var c=r("7a23"),n=Object(c["withScopeId"])("data-v-0bcad071");Object(c["pushScopeId"])("data-v-0bcad071");var a={class:"projects-index"},o={key:0},i={class:"filters"},s=Object(c["createTextVNode"])("Create New Project"),l={class:"grid"},u={key:1,class:"no-projects"},d=Object(c["createVNode"])("h2",{class:"no-projects__title"},"No projects have been setup!",-1),p=Object(c["createVNode"])("p",{class:"no-projects__message"},"Create your first now!",-1),b=Object(c["createTextVNode"])("Create a Project");Object(c["popScopeId"])();var j=n((function(e,t,r,j,f,m){var h=Object(c["resolveComponent"])("page-head"),O=Object(c["resolveComponent"])("filter-bar"),v=Object(c["resolveComponent"])("router-link"),k=Object(c["resolveComponent"])("project-card");return Object(c["openBlock"])(),Object(c["createBlock"])("div",a,[Object(c["createVNode"])(h,{title:"Ongoing Projects",subtitle:m.pageSubtitle},null,8,["subtitle"]),m.hasProjects?(Object(c["openBlock"])(),Object(c["createBlock"])("div",o,[Object(c["createVNode"])("div",i,[Object(c["createVNode"])(O,{onUpdate:m.filterProjects,onReset:m.resetProjects},null,8,["onUpdate","onReset"]),Object(c["createVNode"])(v,{to:"/projects/create",class:"btn btn-default"},{default:n((function(){return[s]})),_:1})]),Object(c["createVNode"])("section",l,[(Object(c["openBlock"])(!0),Object(c["createBlock"])(c["Fragment"],null,Object(c["renderList"])(e.projects,(function(e,t){return Object(c["openBlock"])(),Object(c["createBlock"])(k,{key:t,project:e},null,8,["project"])})),128))])])):(Object(c["openBlock"])(),Object(c["createBlock"])("section",u,[d,p,Object(c["createVNode"])(v,{to:"/projects/create",class:"btn btn-default"},{default:n((function(){return[b]})),_:1})]))])})),f=(r("96cf"),r("1da1")),m=r("5530"),h=r("5502"),O=r("009a"),v=r("4a6a"),k=(r("b0c0"),{class:"filter-bar"}),y={class:"form-item"},N=Object(c["createVNode"])("label",{for:"name"},"Name",-1),w=Object(c["createTextVNode"])("Clear "),P=Object(c["createVNode"])("i",{class:"fas fa-filter ml-5"},null,-1);function g(e,t,r,n,a,o){var i=Object(c["resolveComponent"])("autocomplete");return Object(c["openBlock"])(),Object(c["createBlock"])("div",k,[Object(c["createVNode"])("div",y,[N,Object(c["withDirectives"])(Object(c["createVNode"])("input",{type:"text",id:"name","onUpdate:modelValue":t[1]||(t[1]=function(e){return a.name=e}),placeholder:"Search by Project Name",onKeyup:t[2]||(t[2]=function(){return o.filterByName&&o.filterByName.apply(o,arguments)}),autocomplete:"off"},null,544),[[c["vModelText"],a.name]])]),Object(c["createVNode"])(i,{label:"Client",url:"api/clients",filterKey:"client",searchKey:"name",onSelected:o.addFilter},null,8,["onSelected"]),Object(c["createVNode"])(i,{label:"Project Lead",url:"api/users/project-leads",filterKey:"projectLead",searchKey:"name",onSelected:o.addFilter},null,8,["onSelected"]),Object(c["createVNode"])("button",{class:"btn btn-alt filter-bar__clear",onClick:t[3]||(t[3]=function(){return o.clearFilters&&o.clearFilters.apply(o,arguments)})},[w,P])])}r("c740"),r("4160"),r("159b");var V=r("1b5b"),B={name:"FilterBar",components:{Autocomplete:V["a"]},data:function(){return{name:"",meta:null,filters:[],keyupTimeout:null}},methods:{filterByName:function(){var e=this;clearTimeout(this.keyupTimeout),this.keyupTimeout=setTimeout((function(){e.addFilter({key:"name",value:self.name})}),500)},addFilter:function(e){var t=this.filters.findIndex((function(t){return t.key===e.key}));-1!==t?this.filters[t].value=e.value:this.filters.push(e),this.filterResults()},filterResults:function(){var e=this;return Object(f["a"])(regeneratorRuntime.mark((function t(){var r,c;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return e.$store.commit("util/enableLoader"),r=[],e.filters.forEach((function(e){e.value.hasOwnProperty("id")?r[e.key]=e.value.id:r[e.key]=e.value})),t.next=5,e.$api("api/projects/filter","GET",r);case 5:c=t.sent,e.$emit("update",c.data),e.$store.commit("util/disableLoader");case 8:case"end":return t.stop()}}),t)})))()},clearFilters:function(){this.name="",this.meta=null,this.filters=[],document.querySelectorAll(".filter-bar input").forEach((function(e){return e.value=""})),this.$emit("reset")}}};r("37a8");B.render=g;var x=B,R=r("c6d2"),C={name:"ProjectsIndex",components:{Breadcrumbs:R["a"],FilterBar:x,ProjectCard:O["a"],PageHead:v["a"]},data:function(){return{filteredResults:[],filtersApplied:!1}},computed:Object(m["a"])(Object(m["a"])({},Object(h["c"])({projects:"projects/getAllProjects"})),{},{pageSubtitle:function(){return"There are currently ".concat(this.projects.length," in the pipeline")},hasProjects:function(){return this.projects.length>0}}),mounted:function(){var e=this;return Object(f["a"])(regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,e.fetchProjects();case 2:case"end":return t.stop()}}),t)})))()},methods:{fetchProjects:function(){var e=this;return Object(f["a"])(regeneratorRuntime.mark((function t(){var r;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return e.$store.commit("util/enableLoader"),t.next=3,e.$api("api/projects","GET");case 3:r=t.sent,e.$store.commit("projects/setProjects",r.data),e.$store.commit("util/disableLoader");case 6:case"end":return t.stop()}}),t)})))()},filterProjects:function(e){this.filtersApplied=!0,this.$store.commit("projects/setProjects",e)},resetProjects:function(){var e=this;return Object(f["a"])(regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return e.filtersApplied=!1,t.next=3,e.fetchProjects();case 3:case"end":return t.stop()}}),t)})))()}}};r("b008");C.render=j,C.__scopeId="data-v-0bcad071";t["default"]=C},fbe7:function(e,t,r){}}]);
//# sourceMappingURL=chunk-7997b1cb.f190f7c7.js.map