(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-d5fb4bea"],{"0ab3":function(e,t,n){},1534:function(e,t,n){},"35c3":function(e,t,n){"use strict";n("96d1")},"96d1":function(e,t,n){},c1d3:function(e,t,n){"use strict";n("0ab3")},db9f:function(e,t,n){"use strict";n("1534")},f331:function(e,t,n){"use strict";n.r(t);var c=n("7a23"),r={class:"clients-index"},a={class:"filters"},i=Object(c["createTextVNode"])("Add New Client"),o={class:"grid"};function l(e,t,n,l,s,u){var d=Object(c["resolveComponent"])("PageHead"),b=Object(c["resolveComponent"])("client-filters"),p=Object(c["resolveComponent"])("router-link"),f=Object(c["resolveComponent"])("client-card");return Object(c["openBlock"])(),Object(c["createBlock"])("div",r,[Object(c["createVNode"])(d,{title:"Clients",subtitle:u.pageSubtitle},null,8,["subtitle"]),Object(c["createVNode"])("div",a,[Object(c["createVNode"])(b,{onUpdate:u.updateClients},null,8,["onUpdate"]),Object(c["createVNode"])(p,{to:"/clients/create",class:"btn btn-default"},{default:Object(c["withCtx"])((function(){return[i]})),_:1})]),Object(c["createVNode"])("section",o,[(Object(c["openBlock"])(!0),Object(c["createBlock"])(c["Fragment"],null,Object(c["renderList"])(s.clients,(function(e,t){return Object(c["openBlock"])(),Object(c["createBlock"])(f,{key:t,client:e},null,8,["client"])})),128))])])}n("96cf");var s=n("1da1"),u=n("5530"),d=n("4a6a"),b=(n("b0c0"),{class:"client-card"}),p={class:"client-card__body"},f={class:"client-card__client"},m={key:1,class:"client-card__logo logo-placeholder"},j={class:"client-card__content"},O={class:"client-card__name"},h={class:"client-card__subtitle"};function v(e,t,n,r,a,i){var o=Object(c["resolveComponent"])("router-link");return Object(c["openBlock"])(),Object(c["createBlock"])("article",b,[Object(c["createVNode"])(o,{to:i.clientUrl},{default:Object(c["withCtx"])((function(){return[Object(c["createVNode"])("div",p,[Object(c["createVNode"])("div",f,[i.clientLogo?(Object(c["openBlock"])(),Object(c["createBlock"])("img",{key:0,src:i.clientLogo,alt:i.clientLogoAlt,class:"client-card__logo"},null,8,["src","alt"])):(Object(c["openBlock"])(),Object(c["createBlock"])("span",m))]),Object(c["createVNode"])("div",j,[Object(c["createVNode"])("h2",O,Object(c["toDisplayString"])(n.client.name),1),Object(c["createVNode"])("span",h,Object(c["toDisplayString"])(n.client.totalNumberProject)+" projects in the pipeline",1)])])]})),_:1},8,["to"])])}var k={name:"ProjectCard",computed:{client:function(){return this.client.client},state:function(){return this.client.state.state},clientUrl:function(){return"/clients/".concat(this.client.id)},clientLogo:function(){return"http://app.svara.io:8000/".concat(this.client.logoPath)},clientLogoAlt:function(){return"Logo for ".concat(this.client.name)}},props:{client:{type:Object,required:!0}}};n("35c3");k.render=v;var g=k,y={class:"filter-bar"},N={class:"form-item"},C=Object(c["createVNode"])("label",{for:"name"},"Name",-1);function w(e,t,n,r,a,i){var o=Object(c["resolveComponent"])("autocomplete");return Object(c["openBlock"])(),Object(c["createBlock"])("div",y,[Object(c["createVNode"])("div",N,[C,Object(c["withDirectives"])(Object(c["createVNode"])("input",{type:"text",id:"name","onUpdate:modelValue":t[1]||(t[1]=function(e){return a.name=e}),placeholder:"Search by Client Name",onKeyup:t[2]||(t[2]=function(){return i.filterByName&&i.filterByName.apply(i,arguments)}),autocomplete:"off"},null,544),[[c["vModelText"],a.name]])]),Object(c["createVNode"])(o,{label:"Account Manager",url:"api/users/account-managers",filterKey:"accountManager",searchKey:"name",onSelected:i.addFilter},null,8,["onSelected"])])}n("c740"),n("4160"),n("159b");var B=n("1b5b"),V={name:"ClientFilters",components:{Autocomplete:B["a"]},data:function(){return{name:"",meta:null,filters:[],keyupTimeout:null}},methods:{filterByName:function(){var e=this;clearTimeout(this.keyupTimeout),this.keyupTimeout=setTimeout((function(){e.addFilter({key:"name",value:e.name})}),500)},addFilter:function(e){var t=this.filters.findIndex((function(t){return t.key===e.key}));-1!==t?this.filters[t].value=e.value:this.filters.push(e),this.filterResults()},filterResults:function(){var e=this;return Object(s["a"])(regeneratorRuntime.mark((function t(){var n,c;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return e.$store.commit("util/enableLoader"),n=[],e.filters.forEach((function(e){e.value.hasOwnProperty("id")?n[e.key]=e.value.id:n[e.key]=e.value})),console.log(n),t.next=6,e.$api("api/clients/filter","GET",n);case 6:c=t.sent,e.$emit("update",c.data),e.$store.commit("util/disableLoader");case 9:case"end":return t.stop()}}),t)})))()}}};n("c1d3");V.render=w;var _=V,x=n("5502"),L={name:"ClientsIndex",components:{ClientCard:g,PageHead:d["a"],ClientFilters:_},data:function(){return{clients:[]}},computed:Object(u["a"])(Object(u["a"])({},Object(x["c"])({searchTerm:"clients/getSearchTerm"})),{},{pageSubtitle:function(){return"Your currently have ".concat(this.clients.length," clients")}}),mounted:function(){var e=this;return Object(s["a"])(regeneratorRuntime.mark((function t(){var n;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return e.$store.commit("util/enableLoader"),t.next=3,e.$api("api/clients","GET");case 3:n=t.sent,e.clients=n.data,e.$store.commit("util/disableLoader");case 6:case"end":return t.stop()}}),t)})))()},methods:{updateClients:function(e){this.clients=e}}};n("db9f");L.render=l;t["default"]=L}}]);
//# sourceMappingURL=chunk-d5fb4bea.49abc089.js.map