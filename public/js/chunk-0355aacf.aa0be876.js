(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-0355aacf"],{"01b8":function(e,t,a){"use strict";a("e421")},"1b09":function(e,t,a){"use strict";a("77fd")},"53f2":function(e,t,a){},"77fd":function(e,t,a){},cb27:function(e,t,a){"use strict";a("53f2")},d3ec:function(e,t,a){"use strict";a.r(t);a("b0c0");var n=a("7a23"),c={class:"teams-index"},r={class:"teams-grid"},s={class:"teams-grid__teams panel"},o=Object(n["createVNode"])("h2",null,"Company Teams",-1),d={class:"teams-grid__list"},u=Object(n["createTextVNode"])(" Add Team "),i=Object(n["createVNode"])("i",{class:"fas fa-users"},null,-1),l={class:"panel"},m={key:0},b={class:"team-users-grid"},p=Object(n["createTextVNode"])(" Add User "),f=Object(n["createVNode"])("i",{class:"fas fa-user-plus"},null,-1),O={key:1,class:"teams-grid__none"},j=Object(n["createVNode"])("h2",null,"Select a team from the sidebar to view their users.",-1);function k(e,t,a,k,h,v){var B=this,T=Object(n["resolveComponent"])("page-head"),g=Object(n["resolveComponent"])("team-card"),N=Object(n["resolveComponent"])("staff-member-card"),U=Object(n["resolveComponent"])("add-user-to-team"),y=Object(n["resolveComponent"])("action-modal");return Object(n["openBlock"])(),Object(n["createBlock"])("div",c,[Object(n["createVNode"])(T,{title:"Teams"}),Object(n["createVNode"])("div",r,[Object(n["createVNode"])("aside",s,[o,Object(n["createVNode"])("ul",d,[(Object(n["openBlock"])(!0),Object(n["createBlock"])(n["Fragment"],null,Object(n["renderList"])(h.teams,(function(e){return Object(n["openBlock"])(),Object(n["createBlock"])("li",{key:e.id},[Object(n["createVNode"])(g,{team:e,onClick:function(t){return v.selectTeam(e,t)},onUpdated:v.updateTeams},null,8,["team","onClick","onUpdated"])])})),128))]),Object(n["createVNode"])("button",{class:"btn btn-default team-users-grid__add",onClick:t[1]||(t[1]=function(){return v.addBlankTeam&&v.addBlankTeam.apply(v,arguments)})},[u,i])]),Object(n["createVNode"])("section",l,[h.selected?(Object(n["openBlock"])(),Object(n["createBlock"])("div",m,[Object(n["createVNode"])("h2",null,"Users in "+Object(n["toDisplayString"])(v.selectedTeam.name),1),Object(n["createVNode"])("div",b,[(Object(n["openBlock"])(!0),Object(n["createBlock"])(n["Fragment"],null,Object(n["renderList"])(v.selectedTeam.members,(function(e,t){return Object(n["openBlock"])(),Object(n["createBlock"])(N,{key:t,user:e,deletable:!0,"main-user":!1,onDeleted:function(t){return v.removeUser(e.id,h.selected)}},null,8,["user","onDeleted"])})),128))]),Object(n["createVNode"])("button",{class:"btn btn-default team-users-grid__add",onClick:t[2]||(t[2]=function(){return v.addUser&&v.addUser.apply(v,arguments)})},[p,f])])):(Object(n["openBlock"])(),Object(n["createBlock"])("div",O,[j]))])]),h.addUserModal?(Object(n["openBlock"])(),Object(n["createBlock"])(y,{key:0,active:h.addUserModal,title:"Add User to Team",onClose:v.closeModal},{default:Object(n["withCtx"])((function(){return[Object(n["createVNode"])(U,{teamId:B.selected,onUpdated:v.updateTeams,onClose:v.closeModal},null,8,["teamId","onUpdated","onClose"])]})),_:1},8,["active","onClose"])):Object(n["createCommentVNode"])("",!0)])}a("99af"),a("7db0"),a("96cf");var h=a("1da1"),v=a("4a6a"),B=a("1415"),T=a("e4e1"),g=a("053a"),N={class:"team-add-user"},U=Object(n["createVNode"])("p",null,"Find a user to add to the team. They must not currently belong to a team, as users can only belong to a single team.",-1),y={class:"form-item"},V=Object(n["createVNode"])("label",{for:"user"},"Find User (By Name)",-1),C={key:0,class:"search-results"},w={class:"search-results__name"},x=Object(n["createVNode"])("i",{class:"far fa-check-circle"},null,-1);function _(e,t,a,c,r,s){var o=Object(n["resolveComponent"])("staff-member-card");return Object(n["openBlock"])(),Object(n["createBlock"])("div",N,[U,Object(n["createVNode"])("div",y,[V,Object(n["createVNode"])("input",{type:"text",name:"user",id:"user",onKeyup:t[1]||(t[1]=function(){return s.findUser&&s.findUser.apply(s,arguments)}),autocomplete:"off"},null,32),0!==r.userResults.length?(Object(n["openBlock"])(),Object(n["createBlock"])("div",C,[(Object(n["openBlock"])(!0),Object(n["createBlock"])(n["Fragment"],null,Object(n["renderList"])(r.userResults,(function(e){return Object(n["openBlock"])(),Object(n["createBlock"])("article",{class:"search-results__result",key:e.id,onClick:function(t){return s.selectUser(e)}},[Object(n["createVNode"])("span",w,Object(n["toDisplayString"])(e.name),1),x],8,["onClick"])})),128))])):Object(n["createCommentVNode"])("",!0)]),r.user?(Object(n["openBlock"])(),Object(n["createBlock"])(o,{key:0,user:r.user},null,8,["user"])):Object(n["createCommentVNode"])("",!0),Object(n["createVNode"])("button",{class:"btn btn-default",onClick:t[2]||(t[2]=function(){return s.confirmUser&&s.confirmUser.apply(s,arguments)})},"Add User to Team")])}a("a9e3");var R={name:"AddUserToTeam",components:{StaffMemberCard:T["a"]},emits:["close","updated"],props:{teamId:{required:!0,type:Number}},data:function(){return{userResults:[],user:null}},mounted:function(){},methods:{findUser:function(e){var t=this;return Object(h["a"])(regeneratorRuntime.mark((function a(){var n,c;return regeneratorRuntime.wrap((function(a){while(1)switch(a.prev=a.next){case 0:return n=e.target.value,a.next=3,t.$api("api/teams/find-user","GET",{name:n});case 3:c=a.sent,t.userResults=c.data;case 5:case"end":return a.stop()}}),a)})))()},selectUser:function(e){this.user=e,this.userResults=[]},confirmUser:function(){var e=this;return Object(h["a"])(regeneratorRuntime.mark((function t(){var a;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,e.$api("api/teams/".concat(e.teamId,"/user/").concat(e.user.id),"POST");case 2:a=t.sent,a.data.success&&(e.$emit("updated",a.data.teams),e.$emit("close"));case 4:case"end":return t.stop()}}),t)})))()}}};a("cb27");R.render=_;var M=R,S={class:"team-card"},$={class:"team-card__total"};function A(e,t,a,c,r,s){return Object(n["openBlock"])(),Object(n["createBlock"])("div",S,[r.edit?Object(n["withDirectives"])((Object(n["openBlock"])(),Object(n["createBlock"])("input",{key:0,type:"text",class:"team-card__input","onUpdate:modelValue":t[1]||(t[1]=function(e){return a.team.name=e}),onBlur:t[2]||(t[2]=function(){return s.updateTeam&&s.updateTeam.apply(s,arguments)})},null,544)),[[n["vModelText"],a.team.name]]):(Object(n["openBlock"])(),Object(n["createBlock"])("h3",{key:1,class:"team-card__name",onClick:t[3]||(t[3]=function(e){return r.edit=!0})},Object(n["toDisplayString"])(a.team.name),1)),Object(n["createVNode"])("p",$,Object(n["toDisplayString"])(a.team.members.length)+" members in team",1)])}var D={name:"TeamCard",emits:["updated"],props:{team:{required:!0,type:Object}},data:function(){return{edit:!1}},mounted:function(){var e=this;this.$nextTick((function(){null===e.team.id&&(e.edit=!0)}))},methods:{updateTeam:function(){var e=this;return Object(h["a"])(regeneratorRuntime.mark((function t(){var a;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:if(null!==e.team.id){t.next=6;break}return t.next=3,e.$api("api/teams","POST",{name:e.team.name});case 3:a=t.sent,t.next=9;break;case 6:return t.next=8,e.$api("api/teams/".concat(e.team.id),"PATCH",{name:e.team.name});case 8:a=t.sent;case 9:e.edit=!1,e.$emit("updated",a.data.teams);case 11:case"end":return t.stop()}}),t)})))()}}};a("01b8");D.render=A;var F=D,P={name:"index",components:{AddUserToTeam:M,ActionModal:g["a"],StaffMemberCard:T["a"],ProjectStaffMember:B["a"],PageHead:v["a"],TeamCard:F},data:function(){return{teams:[],selected:null,addUserModal:!1}},computed:{selectedTeam:function(){var e=this;return this.teams.find((function(t){return t.id===e.selected}))}},mounted:function(){var e=this;return Object(h["a"])(regeneratorRuntime.mark((function t(){var a;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,e.$api("api/teams");case 2:a=t.sent,e.teams=a.data;case 4:case"end":return t.stop()}}),t)})))()},methods:{selectTeam:function(e,t){this.selected=e.id},removeUser:function(e,t){var a=this;return Object(h["a"])(regeneratorRuntime.mark((function n(){var c;return regeneratorRuntime.wrap((function(n){while(1)switch(n.prev=n.next){case 0:return n.next=2,a.$api("api/teams/".concat(t,"/user/").concat(e),"DELETE");case 2:c=n.sent,c.data.success&&(a.teams=c.data.teams);case 4:case"end":return n.stop()}}),n)})))()},addBlankTeam:function(){this.teams.push({id:null,name:"New Team",members:[]})},updateTeams:function(e){this.teams=e},addUser:function(){this.addUserModal=!0},closeModal:function(){this.addUserModal=!1}}};a("1b09");P.render=k;t["default"]=P},e421:function(e,t,a){}}]);
//# sourceMappingURL=chunk-0355aacf.aa0be876.js.map